import{a as B,b as z,i as K,j as q}from"./chunk-WBYOZ3TA.js";import{$a as M,Da as k,I as A,N as D,Oa as f,Pa as L,Qa as T,Ra as N,S as p,Sa as U,T as d,Ta as $,Ua as s,Va as r,Wa as V,Xa as m,Y as x,Ya as h,Za as F,_a as g,ab as _,bb as v,cb as u,db as C,eb as n,fb as E,gb as j,hb as R,ib as O,qa as l}from"./chunk-PWZFIMDE.js";var b=class i{title="";description="";unhighlight=new x;unHighlight(){this.unhighlight.emit()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=k({type:i,selectors:[["app-task-highlight"]],inputs:{title:"title",description:"description"},outputs:{unhighlight:"unhighlight"},decls:9,vars:2,consts:[[1,"task-highlight"],[3,"click"]],template:function(t,o){t&1&&(m(0,"div",0)(1,"h3"),n(2,"T\xE2che mise en avant"),h(),m(3,"p"),n(4),h(),m(5,"p"),n(6),h(),m(7,"button",1),v("click",function(){return o.unHighlight()}),n(8,"Fermer"),h()()),t&2&&(l(4),E(o.title),l(2),E(o.description))},encapsulation:2,changeDetection:0})};var S=class i{title="";description="";update=new x;cancel=new x;updateTask(e,t){this.title=e,this.description=t,this.update.emit({title:e,description:t})}cancelUpdate(){this.cancel.emit()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=k({type:i,selectors:[["app-task-edit"]],inputs:{title:"title",description:"description"},outputs:{update:"update",cancel:"cancel"},decls:16,vars:2,consts:[["taskInputTitle",""],["taskInputDescription",""],["for","taskInputTitle"],["type","text",3,"value"],["for","taskInputDescription"],[3,"click"]],template:function(t,o){if(t&1){let a=g();m(0,"h2"),n(1,"Modifier la t\xE2che : "),h(),m(2,"label",2),n(3,"Titre de la t\xE2che : "),h(),F(4,"input",3,0)(6,"br"),m(7,"label",4),n(8,"Description de la t\xE2che : "),h(),F(9,"textarea",3,1)(11,"br"),m(12,"button",5),v("click",function(){p(a);let w=C(5),I=C(10);return d(o.updateTask(w.value,I.value))}),n(13,"Valider la modification"),h(),m(14,"button",5),v("click",function(){return p(a),d(o.cancelUpdate())}),n(15,"Annuler la modification"),h()}t&2&&(l(4),M("value",o.title),l(5),M("value",o.description))},encapsulation:2})};var P=class i{whenAdding(e){alert(`La t\xE2che ${e} a \xE9t\xE9 ajout\xE9e avec succ\xE8s !`)}whenUpdating(e){alert(`La t\xE2che ${e} a \xE9t\xE9 modifi\xE9e avec succ\xE8s !`)}whenDeleting(e){alert(`La t\xE2che ${e} a \xE9t\xE9 supprim\xE9e avec succ\xE8s !`)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=A({token:i,factory:i.\u0275fac,providedIn:"root"})};var J=(i,e)=>e.id;function Q(i,e){if(i&1){let t=g();s(0,"app-task-edit",10),_("update",function(a){p(t);let c=u();return d(c.updateContainer.update.emit(a))})("cancel",function(){p(t);let a=u();return d(a.cancelUpdate())}),r()}if(i&2){let t=u();$("title",t.updateContainer.title)("description",t.updateContainer.description)}}function W(i,e){if(i&1&&(s(0,"del"),n(1),r()),i&2){let t=u().$implicit;l(),E(t.title)}}function X(i,e){if(i&1&&n(0),i&2){let t=u().$implicit;j(" ",t.title," ")}}function Y(i,e){i&1&&n(0," Restaurer ")}function Z(i,e){i&1&&n(0," Terminer ")}function tt(i,e){if(i&1){let t=g();s(0,"li"),f(1,W,2,1,"del")(2,X,1,1),r(),s(3,"button",8),_("click",function(){let a=p(t).$implicit,c=u(2);return d(c.highlight(a))}),n(4,"Mettre en avant"),r(),s(5,"button",8),_("click",function(){let a=p(t).$implicit,c=u(2);return d(c.update(a))}),n(6,"Modifier"),r(),s(7,"button",8),_("click",function(){let a=p(t).$implicit,c=u(2);return d(c.finish(a))}),f(8,Y,1,0)(9,Z,1,0),r(),s(10,"button",8),_("click",function(){let a=p(t).$implicit,c=u(2);return d(c.delete(a))}),n(11,"Supprimer"),r()}if(i&2){let t=e.$implicit;l(),T(t.completed?1:2),l(7),T(t.completed?8:9)}}function et(i,e){i&1&&(s(0,"ul"),N(1,tt,12,2,null,null,J),r()),i&2&&(l(),U(e))}function it(i,e){i&1&&(s(0,"p"),n(1,"Chargement..."),r())}function nt(i,e){if(i&1){let t=g();s(0,"app-task-highlight",11),_("unhighlight",function(){p(t);let a=u();return d(a.unHightListTask())}),r()}if(i&2){let t=u();$("title",t.highlightContainer.title)("description",t.highlightContainer.description)}}var y=class i{tasks$;highlightContainer=null;updateContainer=null;taskService=D(q);notificationService=D(P);constructor(){this.tasks$=this.taskService.getTasks()}addTask(e,t){this.taskService.addTask(e,t),this.notificationService.whenAdding(e)}highlight(e){this.highlightContainer=new b,this.highlightContainer.title=e.title,this.highlightContainer.description=e.description}unHightListTask(){this.highlightContainer=null}update(e){this.updateContainer=new S,this.updateContainer.title=e.title,this.updateContainer.description=e.description,this.updateContainer.update.subscribe(t=>{this.taskService.updateTask(e.id,t.title,t.description).subscribe(()=>{this.tasks$=this.taskService.getTasks(),this.notificationService.whenUpdating(e.title),this.updateContainer=null})})}cancelUpdate(){this.updateContainer=null}finish(e){e.completed=!e.completed}delete(e){confirm(`Voulez-vous vraiment supprimer la t\xE2che "${e.title}" ?`)&&this.taskService.deleteTask(e.id).subscribe(()=>{this.tasks$=this.taskService.getTasks(),this.notificationService.whenDeleting(e.title)})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=k({type:i,selectors:[["app-tasks-page"]],decls:23,vars:5,consts:[["notificationContainer",""],["formNewTask",""],["taskInputTitle",""],["taskInputDescription",""],["for","taskInputTitle"],["type","text","placeholder","Acheter du lait"],["for","taskInputDescription"],["type","text","placeholder","Il faut du lait de vache, pas de ch\xE8vre"],[3,"click"],[3,"title","description"],[3,"update","cancel","title","description"],[3,"unhighlight","title","description"]],template:function(t,o){if(t&1){let a=g();V(0,"div",null,0),s(2,"div",null,1)(4,"h2"),n(5,"Ajouter une nouvelle t\xE2che : "),r(),s(6,"label",4),n(7,"Titre de la t\xE2che : "),r(),V(8,"input",5,2)(10,"br"),s(11,"label",6),n(12,"Description de la t\xE2che : "),r(),V(13,"textarea",7,3)(15,"br"),s(16,"button",8),_("click",function(){p(a);let w=C(9),I=C(14);return o.addTask(w.value,I.value),w.value="",d(I.value="")}),n(17," Ajouter "),r()(),f(18,Q,1,2,"app-task-edit",9),f(19,et,3,0,"ul"),R(20,"async"),L(21,it,2,0,"p"),f(22,nt,1,2,"app-task-highlight",9)}if(t&2){let a;l(18),T(o.updateContainer?18:-1),l(),T((a=O(20,3,o.tasks$))?19:21,a),l(3),T(o.highlightContainer?22:-1)}},dependencies:[z,K,S,b,B],encapsulation:2,changeDetection:0})};var yt=[{path:"",component:y}];export{yt as TASKS_ROUTES};
